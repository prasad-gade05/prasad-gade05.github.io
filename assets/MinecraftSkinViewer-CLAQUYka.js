import{r as l,j as M}from"./vendor-DPWyeAne.js";import{S as R,F as z,I as A}from"./three-vendor-nb70ti4B.js";const T=({skinUrl:d,width:m=300,height:f=400})=>{const h=l.useRef(null),x=l.useRef(null),o=l.useRef({active:!1,startTime:null});l.useEffect(()=>{if(!h.current)return;const t=new R({canvas:h.current,width:m,height:f,skin:d});t.camera.position.set(0,0,50),t.fov=70,t.zoom=.6,t.controls.enableRotate=!0,t.controls.enableZoom=!0,t.controls.enablePan=!1;const P=new A,k=new z((n,g,v)=>{if(P.update(n,v),o.current.active){o.current.startTime===null&&(o.current.startTime=g);const s=1,c=g-o.current.startTime;if(c<s){const e=c/s;n.position.y=Math.sin(e*Math.PI)*10,n.skin.leftLeg.rotation.z=Math.sin(e*Math.PI)*.5,n.skin.rightLeg.rotation.z=-Math.sin(e*Math.PI)*.5,n.skin.leftArm.rotation.z=Math.sin(e*Math.PI)*2,n.skin.rightArm.rotation.z=-Math.sin(e*Math.PI)*2;return}else o.current.active=!1,o.current.startTime=null,n.position.y=0}if(n.parent){const s=t.camera.position,c=Math.atan2(s.x,s.z);let r=(n.parent.rotation.y-c)%(2*Math.PI);r<0&&(r+=2*Math.PI),r>Math.PI&&(r-=2*Math.PI);const p=.5;if(Math.abs(r)<p){const i=(r+p)/(2*p);let u=0,b=0;if(i<.2){const a=i/.2;u=-Math.PI*.7*a}else if(i<.8){const a=(i-.2)/.6;u=-Math.PI*.7+Math.sin(a*Math.PI*4)*.2,b=Math.sin(a*Math.PI*4)*.1}else{const a=(i-.8)/.2;u=-Math.PI*.7*(1-a)}n.skin.rightArm.rotation.z=u,n.skin.rightArm.rotation.x=b}else n.skin.rightArm.rotation.z=0,n.skin.rightArm.rotation.x=0}});return t.animation=k,t.autoRotate=!0,t.autoRotateSpeed=.5,x.current=t,()=>{t.dispose()}},[d,m,f]);const I=()=>{o.current&&!o.current.active&&(o.current.active=!0,o.current.startTime=null)};return M.jsxs("div",{style:{position:"relative",width:m,height:f},children:[M.jsx("canvas",{ref:h,style:{display:"block",borderRadius:"8px",cursor:"grab"}}),M.jsx("button",{onClick:I,style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",padding:"8px 16px",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"20px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",transition:"all 0.2s",zIndex:10},onMouseEnter:t=>t.target.style.backgroundColor="rgba(0, 0, 0, 0.8)",onMouseLeave:t=>t.target.style.backgroundColor="rgba(0, 0, 0, 0.6)",children:"Jump!"})]})};export{T as default};
